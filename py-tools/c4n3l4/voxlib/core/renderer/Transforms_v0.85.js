function vxlTransforms(a){this.stack=[];this.view=a;this.mvMatrix=new vxlMatrix4x4();this.pMatrix=new vxlMatrix4x4();this.nMatrix=new vxlMatrix4x4();this.cMatrix=new vxlMatrix4x4()}vxlTransforms.prototype.calculateModelView=function(){vxl.mat4.set(this.view.cameraman.active.getViewTransform(),this.mvMatrix)};vxlTransforms.prototype.calculateNormal=function(){vxl.mat4.identity(this.nMatrix);vxl.mat4.set(this.mvMatrix,this.nMatrix);vxl.mat4.inverse(this.nMatrix);vxl.mat4.transpose(this.nMatrix)};vxlTransforms.prototype.calculatePerspective=function(){vxl.mat4.identity(this.pMatrix);
vxl.mat4.perspective(this.pMatrix,this.view.fovy,this.view.width/this.view.height,this.view.zNear,this.view.zFar)};vxlTransforms.prototype.update=function(){this.calculateModelView();this.calculatePerspective();this.calculateNormal()};vxlTransforms.prototype.updatePerspective=function(){vxl.mat4.perspective(this.transforms.pMatrix,this.view.fovy,this.view.width/this.view.height,this.view.zNear,this.view.zFar)};vxlTransforms.prototype.push=function(){var a=vxl.mat4.create();mat4.set(this.mvMatrix,a);
this.stack.push(a)};vxlTransforms.prototype.pop=function(){if(this.stack.length==0){return}this.mvMatrix=this.stack.pop()};