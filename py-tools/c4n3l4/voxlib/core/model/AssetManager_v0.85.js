function vxlAssetManager(){this.firstLoadedModel=false;this.toLoad=new Array();this.assets=[];vxl.go.notifier.addSource(vxl.events.MODELS_LOADED,this)}vxlAssetManager.prototype.add=function(b,a,c){this.createAsset(b,a,c)};vxlAssetManager.prototype.load=function(a,d){var b=this;if(b.isModelLoaded(a)){return}vxl.go.console("AssetManager: Requesting "+a+"...");var c=new XMLHttpRequest();c.open("GET",vxl.def.model.folder+"/"+a);c.onreadystatechange=function(){if(c.readyState==4){if(c.status==404){alert("vxl.go.assetManager says: "+a+" does not exist")
}else{b.createAsset(a,JSON.parse(c.responseText),d)}}};c.send()};vxlAssetManager.prototype.loadList=function(b,c){this.toLoad=b.slice(0);vxl.go.console("models to load: "+this.toLoad.length);for(var a=0;a<this.toLoad.length;a++){this.load(this.toLoad[a],c)}};vxlAssetManager.prototype.createAsset=function(b,d,c){var a=new vxlModel();a.load(b,d);if(!this.firstLoadedModel){c.bb=a.outline;this.firstLoadedModel=true}a.loaded=true;this.assets.push(a);vxl.go.console("AssetManager: asset "+a.name+" created.");
if(c!=undefined&&c instanceof vxlScene){vxl.go.console("AssetManager: notifying the scene...");if(c.loadingMode==vxl.def.asset.loadingMode.LIVE){c.createActor(a)}else{if(c.loadingMode==vxl.def.asset.loadingMode.LATER){if(assetManager.allLoaded()){c.createActors(assetManager.assets)}}else{if(c.loadingMode==vxl.def.asset.loadingMode.DETACHED){}}}}if(this.allLoaded()){vxl.go.notifier.fire(vxl.events.MODELS_LOADED)}};vxlAssetManager.prototype.reset=function(){this.firstLoadedModel=false;for(var a=0;a<this.assets.length;
a++){this.assets[a]=null}this.assets=[];this.toLoad=[]};vxlAssetManager.prototype.isModelLoaded=function(a){for(var b=0;b<this.assets.length;b++){if(this.assets[b].name==a){return true}}return false};vxlAssetManager.prototype.allLoaded=function(){return(this.assets.length==this.toLoad.length)};vxlAssetManager.prototype.getAssetByName=function(b){for(var c=0,a=this.assets.length;c<a;c+=1){if(this.assets[c].name==b){return this.assets[c]}}return null};vxl.go.assetManager=new vxlAssetManager();