<html>
	<head>
		<title>Voxelent - Learn & Play: Heart Demo</title>
		<meta charset="utf-8" />
		<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
        <meta name="description" content="Voxelent - Learn & Play: Picking Demo" />
		<meta name="author" content="Diego Cantor" />
		<meta name="viewport" content="width=device-width; initial-scale=1.0" />
		<link href='css/voxelent.css' type='text/css' rel='stylesheet' />
		<script type='text/javascript' src='lib/jquery.js'></script>
		<script type='text/javascript' src='lib/voxelent_v0.86.js'></script>
		<script type='text/javascript' id='code-js'>
			
			var view, animation;
			
			function runVoxApp() {
				
				vxl.go.notifier.addTarget(vxl.events.MODELS_LOADED, this);
				vxl.go.notifier.addTarget(vxl.events.SCENE_UPDATED, this);
				
				//1. Setup the view
				view = vxl.api.setup('view-1');
				scene = view.scene;
				
				//2. Load assets
				vxl.def.model.folder = 'voxdata/models/heart';
				var filelist = ["MYO_01.vtk", "RAV_01.vtk", "LAA_01.vtk", "MYO_02.vtk", "RAV_02.vtk", "LAA_02.vtk", "MYO_03.vtk", "RAV_03.vtk", "LAA_03.vtk", "MYO_04.vtk", "RAV_04.vtk", "LAA_04.vtk", "MYO_05.vtk", "RAV_05.vtk", "LAA_05.vtk", "MYO_06.vtk", "RAV_06.vtk", "LAA_06.vtk", "MYO_07.vtk", "RAV_07.vtk", "LAA_07.vtk", "MYO_08.vtk", "RAV_08.vtk", "LAA_08.vtk", "MYO_09.vtk", "RAV_09.vtk", "LAA_09.vtk", "MYO_10.vtk", "RAV_10.vtk", "LAA_10.vtk", "MYO_11.vtk", "RAV_11.vtk", "LAA_11.vtk", "MYO_12.vtk", "RAV_12.vtk", "LAA_12.vtk", "MYO_13.vtk", "RAV_13.vtk", "LAA_13.vtk", "MYO_14.vtk", "RAV_14.vtk", "LAA_14.vtk", "MYO_15.vtk", "RAV_15.vtk", "LAA_15.vtk", "MYO_16.vtk", "RAV_16.vtk", "LAA_16.vtk", "MYO_17.vtk", "RAV_17.vtk", "LAA_17.vtk", "MYO_18.vtk", "RAV_18.vtk", "LAA_18.vtk", "MYO_19.vtk", "RAV_19.vtk", "LAA_19.vtk", "MYO_20.vtk", "RAV_20.vtk", "LAA_20.vtk"];
				vxl.api.load(filelist);
				
				//3. Define animation map
				var map = {
					frame1 : ["MYO_01.vtk", "RAV_01.vtk", "LAA_01.vtk"],
					frame2 : ["MYO_02.vtk", "RAV_02.vtk", "LAA_02.vtk"],
					frame3 : ["MYO_03.vtk", "RAV_03.vtk", "LAA_03.vtk"],
					frame4 : ["MYO_04.vtk", "RAV_04.vtk", "LAA_04.vtk"],
					frame5 : ["MYO_05.vtk", "RAV_05.vtk", "LAA_05.vtk"],
					frame6 : ["MYO_06.vtk", "RAV_06.vtk", "LAA_06.vtk"],
					frame7 : ["MYO_07.vtk", "RAV_07.vtk", "LAA_07.vtk"],
					frame8 : ["MYO_08.vtk", "RAV_08.vtk", "LAA_08.vtk"],
					frame9 : ["MYO_09.vtk", "RAV_09.vtk", "LAA_09.vtk"],
					frame10 : ["MYO_10.vtk", "RAV_10.vtk", "LAA_10.vtk"],
					frame11 : ["MYO_11.vtk", "RAV_11.vtk", "LAA_11.vtk"],
					frame12 : ["MYO_12.vtk", "RAV_12.vtk", "LAA_12.vtk"],
					frame13 : ["MYO_13.vtk", "RAV_13.vtk", "LAA_13.vtk"],
					frame14 : ["MYO_14.vtk", "RAV_14.vtk", "LAA_14.vtk"],
					frame15 : ["MYO_15.vtk", "RAV_15.vtk", "LAA_15.vtk"],
					frame16 : ["MYO_16.vtk", "RAV_16.vtk", "LAA_16.vtk"],
					frame17 : ["MYO_17.vtk", "RAV_17.vtk", "LAA_17.vtk"],
					frame18 : ["MYO_18.vtk", "RAV_18.vtk", "LAA_18.vtk"],
					frame19 : ["MYO_19.vtk", "RAV_19.vtk", "LAA_19.vtk"],
					frame20 : ["MYO_20.vtk", "RAV_20.vtk", "LAA_20.vtk"]
				};
				animation = new vxlFrameAnimation(map);
				scene.setAnimation(animation);
				view.start();
			}
			

			function handleEvent(event, src){
				if (event == vxl.events.MODELS_LOADED){
	
					vxl.c.camera.setPosition([0,0,500]);
		
					animation.start();
					animation.setFrameRate(100);
					
					view.renderer.setMode(vxl.def.renderer.mode.ANIMFRAME);
					vxl.c.actor = undefined;
				}
				else if (event == vxl.events.SCENE_UPDATED){
					var loaded = view.scene.actors.length;
					$('#status').html('Objects loaded: '+ loaded+' out of 60');
				}
			}
		</script>
		
	</head>
	<body onload='runVoxApp()'>
		<table>
			<tr>
				<td>
				<div class="col-width clearfix header-inner"><img src=
					"css/img/voxelent.png" />
					<div class="shadow"></div>
				</div><div class="header-shadow"></div>
                </td>
			</tr>
			<tr>
				<td>
                
				<canvas id = 'view-1' width='1200' height='500'>
					<p>
						Your browser does not support WebGL :-(
					</p>
				</canvas>
                <p id='status'></p>
                </td>
			</tr>
		</table>
	</body>
</html>